# Linux Foundation Certified System Administrator (LFCS)

## Lesson 10 Time

#### Основы

* аппаратное время `hwclock` (BIOS)
    - обычно UTC
    - команда `hwclock`
* при загрузке устанавливается system clock
    - есть time zone
    - при обычной работы ядро не обращается к hwclock
    - команда `date`
* синхронизация по сети NTP (network time protocol)
    - `ntpd`, `chronyd`
    - расхождение больше 10 минут не синхронизируются

#### Настройка локального времени

* установка `date -s`
* выравнивание системного и аппаратного
    - `hwclock --systohc` или `hwclock -- hctosys`
* CentOS: `timedatectl`
    - показывает время
    - службы синхронизации
#### Синхронизация NTP

* каждый сервер имеет **стратум** (обозначает степень билзости к источнику точного времени)
* Непосредственно соединенные с ИТВ имеют стратум = 0, клиент, соединенный с сервером с s=0 имеет стратум = 1 и т. д.
* два варианта синхронизации:
    - постепенное выравние под точное время
    - мгновенная установка точного времени
* службы синхронизации
    - ntpd 
        + настройки находятся `/etc/ntpd.conf`
        + там указаны сервера синхронизации
        + `ntpd -p` - выводит инфо
    - chronyd - более точная (наносекунды) (RedHat)
        + настройки `/etc/chrony.conf`
        + проверка настроек `chronyc sources`
        + также `chronyc tracking`
        + работает через udp порт 123 (firewall)