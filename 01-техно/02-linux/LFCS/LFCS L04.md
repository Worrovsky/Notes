# Linux Foundation Certified System Administrator (LFCS)

## Lesson 4

#### Vim

* Два режима
    - командный
    - режим ввода
* Переключение из командного в режим ввода:
    - `i` или `insert`
    - `o` - с переходом на новую строку
    - `O` - с переходом на новую строку над текущей
* Переключение в командный режим `Esc`
* Сохранить и выйти `ZZ` или `:wq`
* Переход в визуальный режим
    - `v` (`:visual`)
    - в этом режиме можно выделять текст и
        + удалять `d` `:delete`
        + копировать `y` `:yank`
        + вставлять `p` `:paste`
* Отмена изменений `u` `:undo`
* Отмена отмены `Ctrl + r` `:redo`
* Поиск по документу `/ <какой-то текст>`
    - `n` - следующее вхождение
    - `N` - предыдущее
* Переход к строке `: xxx`
* Удаление строки `dd`, символа `x`

#### Команда less

Используется для:
* чтения результатов других команд
    - `man grep | less`
* чтения файлов

Внутри основан на vim, поэтому работают похожие команды:
    - `/ <что-то>` - поиск
    - `n` - переход к следующему вхождению
    - `g, space, d` - прокрутка экрана


#### Просмотр файлов (cat, tac)

Простой вывод содержимого
`cat` - обычный порядок
`tac` - от последней строки к первой

#### Просмотр файлов (head, tail)

* Вывод последних или первых строк
* можно указывать сколько
    - `tail -n 5 /var/log/messages`
* можно комбинировать для получения конкретных строк
    - `head -n 10 /var/log/messages | tail -n 1` - получаем строку № 10
* `tail -f ...` - отслеживает изменение файла и обновляет данные

#### grep

* Generic regular expression parser
* `grep <что-то> <где>` ищет внутри файлов и выводит строку с искомым
* `grep <что-то> *` - поиск везде
    - `grep test * 2>/dev/null`
* `grep -l ...` - отключает вывод строк, только имена файлов
* `grep -R ...` - поиск рекурсивно
* `grep -i ...` - регистронезависимый поиск
* `grep -v ...` - исключает файлы с вхождением
    - `grep ... ... | grep -v ...` 

#### Регулярные выражения 

* не путать с глоббингом (*, ? для задания имен файлов)
* например `grep 'a*' a*`. Здесь первый аргумент - регулярка, второй - имя файла
* для надежности регулярное выражение помещать в `''`. Bash не будет его интерпретировать
* используются только в специальных местах (grep, vim, awk, sed)
* `man 7 regex`
* не все элементы поддерживаются командой grep
* можно использовать `egrep` (расширенная grep)

##### Элементы РВ
* `^` - начало строки
    - `^adc` - abc. abc1, abcde
* `$` - конец строки
    - `abc$` - abc, zwyabc
* `.` - любой символ, кроме новой строки
    - `a.c` - abc, aфc
* `|` - выбор, или первый символ или второй
    - `ab|cd` - acd, abd
* `{..}` - количество вхождений предыдущего символа
    - `ab{2}` - abb
* `[..]` - набор символов
    - `a[bB]c` - abc. aBc
* `(..)` - группа символов
    - `(123){3}` - 123123123
* `*` - отсутствие или больше символов
    - `ab*c` - ac, abc, abbc
* `+` - один или больше символов
    - `ab+c` - abc, abbc
* `?` - отсутствие или один символ
    - `ab?c` - ac, abc

